// this script allows swapping the primary and secondary fire buttons for any weapon, using the cl_swapattacks_* cvars.
// This part of the code is necessary to keep us firing when we switch weapons while holding a fire button pressed.
// Also updates the keys before firing, so we don't have to switch to another weapon and back to apply the changes
set fire_last 0
set fire2_last 0
alias +fire "firing_swap_apply $firing_lastweapon; set fire_last 1; +checkattack"
alias -fire "set fire_last 0; -checkattack"
alias +fire2 "firing_swap_apply $firing_lastweapon; set fire2_last 1; +checkattack2"
alias -fire2 "set fire2_last 0; -checkattack2"
alias firing_switch_attack_0 ""
alias firing_switch_attack2_0 ""
alias firing_switch_attack_1 "+fire"
alias firing_switch_attack2_1 "+fire2"
alias firing_switch "-fire; -fire2; firing_switch_attack_$fire_last; firing_switch_attack2_$fire2_last;"
// now apply changes to the key binds and get the weapon we are using
alias firing_decision_0 "alias +checkattack +attack; alias -checkattack -attack; alias +checkattack2 +attack2; alias -checkattack2 -attack2"
alias firing_decision_1 "alias +checkattack +attack2; alias -checkattack -attack2; alias +checkattack2 +attack; alias -checkattack2 -attack"
alias firing_swap_apply "firing_decision_${$1}"
alias firing_swap "firing_swap_apply cl_swapattacks_$1; set firing_lastweapon cl_swapattacks_$1; firing_switch"